<!--
  @author Oliver Shen 6/23
  _topbanner.erb – Top Banner partial for Prof. Eric Fosler-Lussier’s site
  Renders site name and navigation tabs.
  Each tab’s URL is pulled from data.top_banner in top_banner.yml.
-->
<nav class="top-banner">
  <!-- 左侧：改成 label，点击折叠/展开左栏 -->
  <label for="leftBarDropdown" class="tb-left" role="button" aria-label="Toggle left sidebar">
    三 Oliver Shen 
  </label>

  <ul class="tb-right">
    <% # 统一路径：去掉结尾的 index.html / 斜杠，空串视为 "/" %>
    <% normalize = ->(u) {
         s = u.to_s
         s = s.sub(%r{index\.html?$}, '')
         s = s.sub(%r{\/+$}, '')
         s = '/' if s.empty?
         s
       } %>

    <% current_norm = normalize.call(current_page.url) %>

    <% data.top_banner.nav.each do |item| %>
      <% target_norm = normalize.call(item.url) %>
      <li>
        <a href="<%= item.url %>" class="<%= current_norm == target_norm ? 'active' : '' %>">
          <%= item.label %>
        </a>
      </li>
    <% end %>
  </ul>
</nav>



